<!-- Comment Section -->
<div class="container p-5 mx-auto">
  <div>


    <!-- Comment Form -->
    {% if user.is_authenticated %}
    <form id="comment-form"
      hx-post="{% url 'add_comment' %}"
      hx-target="#comment-list"
      hx-swap="afterbegin"
      class="mt-6">
      {% csrf_token %}
      <div class="form-control mb-4 flex flex-col md:flex-row items-start md:items-center">
        <textarea
          name="content"
          placeholder="Write your comment here..."
          class="textarea textarea-bordered w-full bg-base-200 mb-2 md:mb-0 md:mr-2 flex-grow"
          required
        ></textarea>
        <input type="hidden" name="car_id" value="{{ car.id }}">
        <button
          type="submit"
          class="btn btn-primary md:w-auto w-full py-0 my-0 h-16"
        >
          Add Comment
        </button>
      </div>
    </form>
    {% else %}
    <p class="text-gray-600">
      You need to be logged in to comment.
      <a href="{% url 'login' %}" class="text-primary font-semibold">
        Log in
      </a>
    </p>
    {% endif %}
    <!-- End Comment Form -->


    <!-- Comment List -->
    <ul id="comment-list" class="space-y-4 overflow-y-auto max-h-96">
      {% for comment in comments %}
        {% include './comment.html' %}
      {% endfor %}
    </ul>
    <!-- End Comment List -->


  </div>
</div>
