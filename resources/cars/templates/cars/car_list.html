{% extends 'base.html' %}

{% block title %}
Car Listing | Car Dealer
{% endblock %}

{% block content %}
{% load static %}
<div class="bg-base-300">

  <div class="brightness-50">
    <img src="{% static 'images/portada.jpg' %}" alt="bmw"
      class="object-cover object-center w-full h-96" />
  </div>

  <div class="container mx-auto p-4 -mt-10">
    <!-- Para desktop: grid con 2 columnas -->
    <!-- Para mobile: grid con 3 filas y 1 columna -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">

      <!-- Elemento 02 (Para mobile y tablet estará arriba de todo) -->
      <div
        class="z-20 lg:col-span-4 bg-purple-800 text-white rounded-lg p-5 order-1">
        <form method="get">
          <!-- Ordenar por: Precio y Fecha -->
          <div class="flex items-center justify-end space-x-2">
            <label for="orderby" class="text-white">Order By:</label>
            <select class="select select-bordered select-info select-sm"
              name="orderby" id="orderby">
              <option value="price">Price</option>
              <option value="date">Date</option>
            </select>
          </div>
        </form>
      </div>

      <!-- Elemento 01 (Para mobile y tablet estará en el medio) -->
      <div class="lg:order-2 order-2">
        <div class="bg-purple-600 text-white rounded-lg p-5 ">

          <form method="get">
            <h2 class="text-lg font-semibold">Options</h2>

            <!-- Filtro Brands -->
            <select class="select select-bordered w-full my-1" name="brand"
              id="brand">
              <option disabled selected value>Brand</option>
              {% for brand in brands %}
              <option value="{{ brand.name }}">{{ brand.name }}</option>
              {% endfor %}
            </select>

            <!-- Filtro Body Type -->
            <select class="select select-bordered w-full my-1" name="brand"
              id="brand">
              <option disabled selected value>Body Type</option>
              {% for body_type in body_types %}
              <option value="{{ body_type.name }}">{{ body_type.name }}</option>
              {% endfor %}
            </select>

            <!-- Filtro Precio -->
            <h2 class="text-lg font-semibold my-1">Select Price</h2>
            <div class="price-range-container">
              <input type="range" id="price-range" min="0" max="{{ max_car_price }}" value="{{ default_max_price }}"
                class="range range-xs" />

              <div class="max-price-container my-1">
                <input type="number" name="max_price" id="max_price" value="{{ max_price|default:default_max_price }}"
                  class="input input-bordered w-full" placeholder="{{ max_car_price }}">
              </div>
            </div>

          </form>
        </div>
      </div>

      <!-- Elemento 03 (Para mobile y tablet estará abajo de todo) -->
      <div class="lg:col-span-3 lg:order-3 order-3">
        <div class="bg-base-100 text-white rounded-lg p-5">
          Cars
          <!-- Pagination -->
          <div class="join w-full justify-center p-5">
            <button class="join-item btn btn-primary">1</button>
            <button class="join-item btn btn-primary">2</button>
            <button class="join-item btn btn-disabled btn-outline">...</button>
            <button class="join-item btn btn-primary">99</button>
            <button class="join-item btn btn-primary">100</button>
          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<!--

                <div>
                    <label for="min_year" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Min Year</label>
                    <input type="number" name="min_year" id="min_year" value="{{ min_year }}" class="input input-bordered w-full" placeholder="2000">
                </div>

                <div>
                    <label for="max_year" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Max Year</label>
                    <input type="number" name="max_year" id="max_year" value="{{ max_year }}" class="input input-bordered w-full" placeholder="2024">
                </div>

                <div class="flex justify-end">
                    <button type="submit" class="btn btn-primary w-full">Apply Filters</button>
                </div>
              -->

{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const rangeInput = document.getElementById('price-range');
    const maxPriceInput = document.getElementById('max_price');

    // Actualizar el input de número cuando el rango cambia
    rangeInput.addEventListener('input', function() {
        maxPriceInput.value = rangeInput.value;
    });

    // Actualizar el rango cuando el input de número cambia
    maxPriceInput.addEventListener('input', function() {
        // Asegurarse de que el valor máximo no exceda el rango definido
        if (parseInt(maxPriceInput.value) > rangeInput.max) {
            maxPriceInput.value = rangeInput.max;
        }
        rangeInput.value = maxPriceInput.value;
    });
});
</script>
{% endblock %}
